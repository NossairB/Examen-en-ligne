<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Examen</title>
</head>
<body>
  <h1>Page de l'examen</h1>
  <p>Cette page affichera les détails de l'examen sélectionné.</p>

  <div id="examDetails"></div>
  <form id="questionForm">
  <label for="type">Type de question:</label>
  <select id="type" name="type">
    <option value="direct">Question directe</option>
    <option value="qcm">QCM</option>
  </select><br><br>

  <label for="statement">Énoncé:</label>
  <input type="text" id="statement" name="statement" required><br><br>

  <label for="answer">Réponse (si question directe):</label>
  <input type="text" id="answer" name="answer"><br><br>

  <label for="note">Note:</label>
  <input type="number" id="note" name="note" required><br><br>

  <label for="duration">Durée (en secondes):</label>
  <input type="number" id="duration" name="duration" required><br><br>

  <button type="submit">Ajouter Question</button>
</form>

<script>
  document.getElementById('questionForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData.entries());

    fetch('http://localhost:3000/add-question', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(data),
    })
    .then(response => response.json())
    .then(data => alert('Question ajoutée avec succès!'))
    .catch(error => console.error('Erreur:', error));
  });
</script>


  <script>
    // Récupérer l'ID de l'examen depuis l'URL
    const examId = window.location.pathname.split('/').pop();

    // Récupérer les détails de l'examen depuis l'API
    fetch(`/api/exams/${examId}`)
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById("examDetails");
        if (data.message === "Examen non trouvé") {
          container.innerHTML = "<p>Examen introuvable.</p>";
        } else {
          container.innerHTML = `
            <h2>${data.title}</h2>
            <p><strong>Description :</strong> ${data.description}</p>
            <p><strong>Public ciblé :</strong> ${data.target}</p>
          `;
        }
      })
      .catch(error => {
        document.getElementById("examDetails").innerHTML = "<p>Erreur lors du chargement de l'examen.</p>";
        console.error(error);
      });
  </script>
</body>
</html>
